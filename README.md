# Sprouts

Calm turn-based forest regrowth roguelite prototype.

## Design Document (Draft v3)

### 1. High-Level Overview

- **Genre:** Calm turn-based forest regrowth roguelite
- **Engine:** Godot 4.4.1 (2D, controller/keyboard only)
- **Core Fantasy:** Restore a fallen forest. Each turn, summon Sprouts—small living guardians—to heal the land, rekindle growth, and defend against creeping decay. Every tile placed pushes time forward, shaping how the forest regrows and where corruption takes root. It’s a gentle balance between nurturing life and holding back rot.

#### Pillars

- **Chill, not idle:** Decisions, not reflexes. Each tile placement ends your turn and progresses the world one step.
- **Readable systems:** Every interaction has a visible cause and effect. Clear feedback, no hidden math.
- **One-input model:** Arrows to move focus, Space to confirm, Z to go back, Tab/Start to open panels.

---

### 2. Gameplay Loop

**Start of Run**

1. **Choose a Totem** and place it at the center of the map.
2. **Tile Variant Draft:** For each core tile category, you are shown **3 variant cards** and must pick **1**:
   - Harvest
   - Build
   - Refine
   - Storage
   - Guard
   - Upgrade
   - Chanting

   Your selections define the rules/abilities for that category **for this run**.
3. A **30-tile deck** is constructed using the configured distribution (e.g., 8H/6B/4R/4G/3S/3U/1C), **filled with the variants you chose** in step 2.

**Turns**

- Draw from (or view) your remaining deck and **place one tile** each turn, adjacent to your existing network.
- Each placement advances time: growth, decay, battles, and resources resolve.

**End States**

- **Victory:** All Decay Totems are destroyed.
- **Defeat:** The Totem is consumed by Decay, or your deck reaches zero tiles.

---

### 3. The Grid & Growth

The forest grows on a flat-topped hex grid, expanding outward from the Totem.

- Every placed tile must connect to an existing one.
- Enclosing empty space creates **Overgrowth**, which transforms into **Groves** after 3 turns, spawning Sprouts.
- Clusters of the same tile type provide synergy bonuses.

Overgrowth touching Decay immediately collapses into corruption, creating tension between expansion and defense.

---

### 4. Resources & Ecology

**Core Resources**

- **Nature Essence:** Gained from Harvest tiles and Groves.
- **Earth Essence:** Produced by Build tiles.
- **Water Essence:** Generated by Refine tiles when adjacent to Nature and Earth producers.
- **Life Essence:** Gained from battle victories (+5 per win). Used for Totem evolution and late-game rituals.

**Caps & Flow**

- Default cap: 5 units per producing tile.
- Harvest clusters: +10 global capacity per tile in cluster.
- Storage tiles: +5 capacity to adjacent producers.
- Water clusters: Double output, +1 turn production time.

**Inventory System**

Essences are stored in a shared inventory panel. Each run’s resource mix reflects your unique tile deck—different forests lean into different strengths.

---

### 5. The Totem (Core Unit)

Totems are the ancient anchors of life. You begin each run by placing one in the map’s center.

- All tiles must remain connected to the Totem’s network.
- Each Totem offers unique auras and abilities.
- Evolve Totems up to Tier 5 using Life Essence to unlock stronger passive effects or localized cleansing.
- Losing the Totem ends the run.

---

### 6. Growth & Mutation

- Fully enclosed areas turn into **Overgrowth**. After 3 turns, they bloom into **Groves**, spawning Sprouts.
- Overgrowth corrupted before blooming becomes Decay.
- Mutations occur through adjacency (e.g., Grove + Harvest → Grove Thicket).

**Turn order**

1. Growth (Overgrowth → Grove).
2. Mutation checks.
3. Decay spread.
4. Resource generation.

---

### 7. Tile Roles & Variants

Each run, you draft **one variant** of each core tile type. Below are **baseline defaults** used for testing; variants may adjust costs, outputs, caps, clustering, or synergies.

- **Harvest Tile (default):** Generates Nature Essence per adjacent Grove; expands capacity.
- **Build Tile (default):** Produces Earth Essence; strengthens Refine and Guard tiles.
- **Refine Tile (default):** Converts Nature + Earth → Water Essence every 2 turns.
- **Storage Tile (default):** Expands capacity of nearby producers by +5.
- **Guard Tile (default):** Hosts up to 5 Sprouts; defends or attacks within a 3-tile radius.
- **Upgrade Tile (default):** Creates combat items over time.
- **Chanting Tile (default):** Produces one-time spells through rituals.
- **Grove Tile:** Formed from Overgrowth; spawns Sprouts and empowers nearby tiles.

**Variant Examples (illustrative)**

- *Harvest — Verdant Bounty:* +1 Nature per 2 Groves; lower base cap.
- *Build — Stone Shelter:* +1 defense to adjacent tiles; −10% Earth output.
- *Refine — Mist Channeler:* Output every 1 turn, but costs 1 Nature on start.
- *Guard — Beacon:* +1 battle range (4 hex), max Sprouts 4.
- *Chanting — Duet:* Adjacent pair reduces ritual time by 2 (only once).

---

### 8. Turn System & Time Flow

Each tile placement = 1 turn. End-of-turn sequence:

1. Activate new tile, check Overgrowth.
2. Growth & mutation updates.
3. Resource generation.
4. Decay spread & battle countdowns.
5. Battles & outcomes.
6. Player review phase (tile preview, spell use, or skip).

---

### 9. Abilities & Powers

- **Spells** from Chanting tiles consume resources and trigger strong effects.
- **Items** from Upgrade tiles equip Sprouts for permanent bonuses.
- **Totem abilities** scale with Tier and Aspect synergy.
- **Life Essence spells** appear mid-run and affect global forest states.

---

### 10. Threats & Corruption

Decay spreads from hidden Decay Totems, corrupting one tile every 3 turns.

- Decay attacks Life tiles after 3 turns of adjacency.
- Guard tiles within 3 hexes trigger battles (Sprouts vs Smogs).
- Win: Decay tiles purified; +5 Life Essence gained.
- Lose: Life tile and nearby hexes are corrupted.

Global limit: 3 Decay attacks per turn. Destroying all Decay Totems ends the run in victory.

---

### 11. UI & Controls

- **Arrow keys:** Move cursor.
- **Space:** Confirm/place tile.
- **Z:** Cancel/back.
- **Tab:** Cycle panels (Resources, Sprouts, **Draft**, Tile Deck, Spells, Combat Log).

**Draft UI (pre-run)**

- Sequential 3-card choices for each tile category (Harvest → Build → Refine → Storage → Guard → Upgrade → Chanting).
- Hover/preview shows costs, outputs, caps, cluster effects, and unique perks.
- Final summary confirms your seven selections before the deck is built.

Panels:

- **Tile Deck:** Shows remaining tiles by type.
- **Resources:** Displays essence totals and generation rates.
- **Sprouts:** Lists HP, traits, and assignments.
- **Combat Log:** Tracks recent battles.

---

### 12. Progression & Meta

- Unlock new **Totems** and **Tile Variants** to expand draft options.
- Earn Essence and Relics for meta-upgrades.
- Adjust **deck.json** ratios to tune difficulty and synergy density.
- Future content adds rare variants or category replacements to the draft pool.

**Draft Pool Growth:**

Completing runs, defeating higher-tier Decay Totems, or meeting hidden objectives adds new variant cards to the seven category pools, increasing build diversity without increasing per-run complexity.

---

### 13. Balancing & Data Configs

All systems are data-driven through JSON configs:

- `tiles.json`: Base rules per category **and** per-category **variant** definitions (IDs, weights, unlock flags).
- `variants.json` (optional): Central index of variant pools per category, unlock conditions, and rarity.
- `deck.json`: Starting deck distribution (default 8H/6B/4R/4G/3S/3U/1C).
- `totems.json`: Totem types, tiers, and auras.
- `sprouts.json`: Combat stats and trait probabilities.
- `decay.json`: Spread rates, timers, and scaling.

**Key Tunables**

- Variant weights in draft pools; min/max power bands.
- Category synergies (e.g., Harvest↔Grove, Build↔Guard, Refine↔Chanting).
- Deck ratio sensitivity (how changes affect early economy vs defense).
- Draft clarity thresholds (UI requires unique value props per variant).

Balance focuses on **meaningful pre-run decisions** (variant draft) and **tight in-run scarcity** (30 tiles, Decay pressure).

---

### 14. Glossary

- **Variant:** One of several alternative rule-sets for a tile category, chosen during the pre-run draft.
- **Deck:** The 30-tile collection built from your chosen variants (e.g., 8H/6B/4R/4G/3S/3U/1C).
- **Totem:** Core life anchor and source of aura effects.
- **Overgrowth → Grove:** 3-turn cycle spawning Sprouts.
- **Sprout:** Living guardian assigned to tiles; key unit in defense and crafting.
- **Decay Totem:** Source of corruption; generates Decay tiles.
- **Smog:** Corrupted enemy fought in Guard battles.
- **Essences:** Nature, Earth, Water, and Life—primary resources.
- **Cluster:** Adjoining same-type tiles amplifying effects.
- **Run:** A full playthrough ending on victory, defeat, or tile exhaustion.
- **Relic:** Meta-progression artifact altering long-term rules.
